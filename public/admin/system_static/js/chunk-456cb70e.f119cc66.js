(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-456cb70e"],{2198:function(t,e,i){},"23f3":function(t,e,i){"use strict";i("331a")},"331a":function(t,e,i){},6968:function(t,e,i){"use strict";i.r(e),i("b0c0");var a=i("c7eb"),s=i("1da1"),r=i("5530"),l=(i("498a"),i("a15b"),i("a9e3"),i("f8b7")),o={name:"order_detail",props:{orderId:{type:String|Number,default:""}},data:function(){return{orderDetail:{},orderList:[],spinShow:!1}},mounted:function(){this.getOrderInfo()},methods:{getOrderInfo:function(){var t=this;this.spinShow=!0,Object(l.A)(this.orderId).then((function(e){t.spinShow=!1,t.orderDetail=e.data,t.orderList=e.data.orderInfo.cartInfo})).catch((function(e){t.spinShow=!1,t.$message.error(e.msg),t.$emit("detall",!1)}))}}},n=(i("23f3"),i("2877")),c=(o=Object(n.a)(o,(function(){var t=this,e=t._self._c;return t.orderDetail.userInfo?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.spinShow,expression:"spinShow"}],staticClass:"order_detail"},[e("div",{staticClass:"msg-box"},[e("div",{staticClass:"box-title"},[t._v("收货信息")]),e("div",{staticClass:"msg-wrapper"},[e("div",{staticClass:"msg-item"},[e("div",{staticClass:"item"},[e("span",[t._v("用户昵称：")]),t._v(t._s(t.orderDetail.userInfo.nickname))]),e("div",{staticClass:"item"},[e("span",[t._v("收货人：")]),t._v(t._s(t.orderDetail.orderInfo.real_name))])]),e("div",{staticClass:"msg-item"},[e("div",{staticClass:"item"},[e("span",[t._v("联系电话：")]),t._v(t._s(t.orderDetail.orderInfo.user_phone))]),e("div",{staticClass:"item"},[e("span",[t._v("收货地址：")]),t._v(t._s(t.orderDetail.orderInfo.user_address))])])])]),e("div",{staticClass:"msg-box",staticStyle:{border:"none"}},[e("div",{staticClass:"box-title"},[t._v("订单信息")]),e("div",{staticClass:"msg-wrapper"},[e("div",{staticClass:"msg-item"},[e("div",{staticClass:"item"},[e("span",[t._v("订单ID：")]),t._v(t._s(t.orderDetail.orderInfo.order_id))]),e("div",{staticClass:"item",staticStyle:{color:"red"}},[e("span",{staticStyle:{color:"red"}},[t._v("订单状态：")]),t._v(t._s(t.orderDetail.orderInfo._status._title)+"\n        ")])]),e("div",{staticClass:"msg-item"},[e("div",{staticClass:"item"},[e("span",[t._v("商品总数：")]),t._v(t._s(t.orderDetail.orderInfo.total_num))]),e("div",{staticClass:"item"},[e("span",[t._v("商品总价：")]),t._v(t._s(parseFloat(t.orderDetail.orderInfo.total_price)+parseFloat(t.orderDetail.orderInfo.vip_true_price||0))+"\n        ")])]),e("div",{staticClass:"msg-item"},[e("div",{staticClass:"item"},[e("span",[t._v("交付邮费：")]),t._v(t._s(t.orderDetail.orderInfo.pay_postage))]),e("div",{staticClass:"item"},[e("span",[t._v("优惠券金额：")]),t._v(t._s(t.orderDetail.orderInfo.coupon_price))])]),e("div",{staticClass:"msg-item"},[e("div",{staticClass:"item"},[e("span",[t._v("会员商品优惠：")]),t._v(t._s(t.orderDetail.orderInfo.vip_true_price||0))]),e("div",{staticClass:"item"},[e("span",[t._v("积分抵扣：")]),t._v(t._s(t.orderDetail.orderInfo.deduction_price||0))])]),e("div",{staticClass:"msg-item"},[e("div",{staticClass:"item"},[e("span",[t._v("实际支付：")]),t._v(t._s(t.orderDetail.orderInfo.pay_price))]),e("div",{staticClass:"item"},[e("span",[t._v("创建时间：")]),t._v(t._s(t.orderDetail.orderInfo.add_time))])]),e("div",{staticClass:"msg-item"},[e("div",{staticClass:"item"},[e("span",[t._v("支付方式：")]),t._v(t._s(t.orderDetail.orderInfo._status._payType))]),e("div",{staticClass:"item"},[e("span",[t._v("推广人：")]),t._v(t._s(t.orderDetail.userInfo.spread_name))])]),e("div",{staticClass:"msg-item"},[e("div",{staticClass:"item"},[e("span",[t._v("商家备注：")]),t._v(t._s(t.orderDetail.orderInfo.mark))])])])]),e("div",{staticClass:"goods-box"},[e("el-table",{attrs:{data:t.orderList}},[e("el-table-column",{attrs:{label:"商品ID",width:"80"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.productInfo.id))])]}}],null,!1,4208280192)}),e("el-table-column",{attrs:{label:"商品名称","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"product_info"},[e("img",{attrs:{src:i.row.productInfo.image,alt:""}}),e("p",[t._v(t._s(i.row.productInfo.store_name))])])]}}],null,!1,1206101081)}),e("el-table-column",{attrs:{label:"商品分类","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(t._s(i.row.class_name))])]}}],null,!1,3276443943)}),e("el-table-column",{attrs:{label:"商品售价","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(t._s(i.row.productInfo.price))])]}}],null,!1,203743095)}),e("el-table-column",{attrs:{label:"商品数量","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(t._s(i.row.cart_num))])]}}],null,!1,1546150460)})],1)],1)]):t._e()}),[],!1,null,"77416480",null).exports,i("2f62"));o={name:"invoice",components:{orderDetall:o},computed:Object(r.a)(Object(r.a)({},Object(c.d)("media",["isMobile"])),{},{labelWidth:function(){return this.isMobile?void 0:"80px"},labelPosition:function(){return this.isMobile?"top":"right"}}),data:function(){return{orderShow:!1,invoiceShow:!1,invoiceDetails:{},formInline:{is_invoice:0,invoice_number:"",remark:""},loading:!1,currentTab:"",tablists:null,timeVal:[],pickerOptions:this.$timeOptions,orderList:[],total:0,orderData:{page:1,limit:15,status:"",data:"",real_name:"",field_key:"",type:""},orderId:0}},created:function(){this.getTabs(),this.getList()},mounted:function(){},methods:{detall:function(t){this.orderShow=t},orderInfo:function(t){this.orderId=t,this.orderShow=!0},empty:function(){this.formInline={is_invoice:1,invoice_number:"",remark:""}},cancel:function(){this.invoiceShow=!1,this.empty()},kaiInvoice:function(t){1!==t&&(this.formInline.invoice_number="",this.formInline.remark="")},handleSubmit:function(){var t=this;if(1===this.formInline.is_invoice&&""===this.formInline.invoice_number.trim())return this.$message.error("请填写发票编号");Object(l.C)(this.invoiceDetails.invoice_id,this.formInline).then((function(e){t.$message.success(e.msg),t.invoiceShow=!1,t.getList(),t.empty(),t.getTabs()})).catch((function(e){t.$message.error(e.msg)}))},edit:function(t){this.invoiceShow=!0,this.invoiceDetails=t,this.formInline.invoice_number=t.invoice_number,this.formInline.remark=t.invoice_reamrk,this.formInline.is_invoice=t.is_invoice},getList:function(){var t=this;this.loading=!0,Object(l.B)(this.orderData).then(function(){var e=Object(s.a)(Object(a.a)().mark((function e(i){var s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!1,s=i.data,t.orderList=s.list,t.total=s.count;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$message.error(e.msg)}))},getTabs:function(){var t=this;Object(l.z)(this.orderData).then((function(e){t.tablists=e.data})).catch((function(e){t.$message.error(e.msg)}))},orderSearch:function(){this.orderData.page=1,this.getTabs(),this.getList()},onchangeTime:function(t){this.orderData.page=1,this.timeVal=t||[],this.orderData.data=this.timeVal[0]&&this.timeVal?this.timeVal.join("-"):"",this.getList(),this.getTabs()},selectChange:function(){this.orderData.page=1,this.getList()},onClickTab:function(){this.orderData.page=1,this.orderData.type=this.currentTab,this.getList()}}},i("7614"),r=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"ivu-mb-16",attrs:{bordered:!1,shadow:"never","body-style":{padding:0}}},[e("div",{staticClass:"padding-add"},[e("el-form",{ref:"orderData",attrs:{model:t.orderData,"label-width":"80px","label-position":"right",inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",{attrs:{label:"创建时间："}},[e("el-date-picker",{staticClass:"mr20",staticStyle:{width:"250px"},attrs:{clearable:"",type:"daterange",editable:!1,format:"yyyy/MM/dd","value-format":"yyyy/MM/dd","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.onchangeTime},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),e("el-form-item",{attrs:{label:"搜索：",prop:"real_name","label-for":"real_name"}},[e("el-input",{staticClass:"form_content_width",attrs:{clearable:"",placeholder:"请输入"},model:{value:t.orderData.real_name,callback:function(e){t.$set(t.orderData,"real_name",e)},expression:"orderData.real_name"}},[e("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.orderData.field_key,callback:function(e){t.$set(t.orderData,"field_key",e)},expression:"orderData.field_key"}},[e("el-option",{attrs:{value:"all",label:"全部"}}),e("el-option",{attrs:{value:"order_id",label:"订单号"}}),e("el-option",{attrs:{value:"uid",label:"UID"}}),e("el-option",{attrs:{value:"real_name",label:"用户姓名"}}),e("el-option",{attrs:{value:"user_phone",label:"用户电话"}})],1)],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.orderSearch}},[t._v("查询")])],1)],1)],1)]),e("el-card",{attrs:{bordered:!1,shadow:"never","body-style":{padding:"0 20px 20px"}}},[t.tablists?e("el-tabs",{on:{"tab-click":t.onClickTab},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[e("el-tab-pane",{attrs:{label:"全部发票（"+t.tablists.all+"）",name:" "}}),e("el-tab-pane",{attrs:{label:"待开发票（"+t.tablists.noOpened+"）",name:"1"}}),e("el-tab-pane",{attrs:{label:"已开发票（"+t.tablists.opened+"）",name:"2"}}),e("el-tab-pane",{attrs:{label:"退款发票（"+t.tablists.refund+"）",name:"3"}})],1):t._e(),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{data:t.orderList,"highlight-current-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"}},[e("el-table-column",{attrs:{label:"订单号","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.order_id))])]}}])}),e("el-table-column",{attrs:{label:"订单金额","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v("¥ "+t._s(i.row.pay_price))])]}}])}),e("el-table-column",{attrs:{label:"发票类型","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(i){return[1===i.row.type?e("div",[t._v("电子普通发票")]):e("div",[t._v("纸质专用发票")])]}}])}),e("el-table-column",{attrs:{label:"发票抬头类型","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(i){return[1===i.row.header_type?e("div",[t._v("个人")]):e("div",[t._v("企业")])]}}])}),e("el-table-column",{attrs:{label:"下单时间","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.add_time))])]}}])}),e("el-table-column",{attrs:{label:"开票状态","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(i){return[1===i.row.is_invoice?e("div",[t._v("已开票")]):e("div",[t._v("未开票")])]}}])}),e("el-table-column",{attrs:{label:"订单状态","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(i){return[0===i.row.status?e("div",[t._v("未发货")]):1===i.row.status?e("div",[t._v("待收货")]):2===i.row.status?e("div",[t._v("待评价")]):3===i.row.status?e("div",[t._v("已完成")]):-2===i.row.status?e("div",[t._v("已退款")]):t._e()]}}])}),e("el-table-column",{attrs:{label:"操作",fixed:"right",width:"170"},scopedSlots:t._u([{key:"default",fn:function(i){return[-2!=i.row.status?e("a",{on:{click:function(e){return t.edit(i.row)}}},[t._v("编辑")]):t._e(),-2!=i.row.status?e("el-divider",{attrs:{direction:"vertical"}}):t._e(),e("a",{on:{click:function(e){return t.orderInfo(i.row.id)}}},[t._v("订单信息")])]}}])})],1),e("div",{staticClass:"acea-row row-right page"},[t.total?e("pagination",{attrs:{total:t.total,page:t.orderData.page,limit:t.orderData.limit},on:{"update:page":function(e){return t.$set(t.orderData,"page",e)},"update:limit":function(e){return t.$set(t.orderData,"limit",e)},pagination:t.getList}}):t._e()],1)],1),e("el-dialog",{staticClass:"order_box",attrs:{visible:t.invoiceShow,title:"发票详情",width:"720px"},on:{"update:visible":function(e){t.invoiceShow=e},closed:t.cancel}},[e("el-form",{ref:"formInline",attrs:{model:t.formInline,"label-width":"80px"},nativeOn:{submit:function(t){t.preventDefault()}}},[1===t.invoiceDetails.header_type&&1===t.invoiceDetails.type?e("div",[e("div",{staticClass:"list"},[e("div",{staticClass:"title"},[t._v("发票信息")]),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("发票抬头: "),e("span",{staticClass:"info"},[t._v(t._s(t.invoiceDetails.name))])]),e("el-col",{attrs:{span:12}},[t._v("发票类型: "),e("span",{staticClass:"info"},[t._v("电子普通发票")])])],1),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("发票抬头类型: 个人")]),e("el-col",{attrs:{span:12}},[t._v("订单金额: "+t._s(t.invoiceDetails.pay_price))])],1)],1),e("div",{staticClass:"list"},[e("div",{staticClass:"title row"},[t._v("联系信息")]),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("真实姓名: "+t._s(t.invoiceDetails.name))]),e("el-col",{attrs:{span:12}},[t._v("联系电话: "+t._s(t.invoiceDetails.drawer_phone))])],1),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("联系邮箱: "+t._s(t.invoiceDetails.email))])],1)],1)]):t._e(),2===t.invoiceDetails.header_type&&1===t.invoiceDetails.type?e("div",[e("div",{staticClass:"list"},[e("div",{staticClass:"title"},[t._v("发票信息")]),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("发票抬头: "),e("span",{staticClass:"info"},[t._v(t._s(t.invoiceDetails.name))])]),e("el-col",{attrs:{span:12}},[t._v("企业税号: "),e("span",{staticClass:"info"},[t._v(t._s(t.invoiceDetails.duty_number))])])],1),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("发票类型: 电子普通发票")]),e("el-col",{attrs:{span:12}},[t._v("发票抬头类型: 企业")])],1)],1),e("div",{staticClass:"list"},[e("div",{staticClass:"title row"},[t._v("联系信息")]),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("真实姓名: "+t._s(t.invoiceDetails.name))]),e("el-col",{attrs:{span:12}},[t._v("联系电话: "+t._s(t.invoiceDetails.user_phone))])],1),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("联系邮箱: "+t._s(t.invoiceDetails.email))])],1)],1)]):t._e(),2===t.invoiceDetails.header_type&&2===t.invoiceDetails.type?e("div",[e("div",{staticClass:"list"},[e("div",{staticClass:"title"},[t._v("发票信息")]),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("发票抬头: "),e("span",{staticClass:"info"},[t._v(t._s(t.invoiceDetails.name))])]),e("el-col",{attrs:{span:12}},[t._v("企业税号: "),e("span",{staticClass:"info"},[t._v(t._s(t.invoiceDetails.duty_number))])])],1),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("发票类型: 纸质专用发票")]),e("el-col",{attrs:{span:12}},[t._v("发票抬头类型: 企业")])],1),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("开户银行: "),e("span",{staticClass:"info"},[t._v(t._s(t.invoiceDetails.bank))])]),e("el-col",{attrs:{span:12}},[t._v("银行账号: "),e("span",{staticClass:"info"},[t._v(t._s(t.invoiceDetails.card_number))])])],1),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("企业地址: "+t._s(t.invoiceDetails.address))]),e("el-col",{attrs:{span:12}},[t._v("企业电话: "+t._s(t.invoiceDetails.tell))])],1)],1),e("div",{staticClass:"list"},[e("div",{staticClass:"title row"},[t._v("联系信息")]),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("真实姓名: "+t._s(t.invoiceDetails.real_name))]),e("el-col",{attrs:{span:12}},[t._v("联系电话: "+t._s(t.invoiceDetails.user_phone))])],1),e("el-row",{staticClass:"row"},[e("el-col",{attrs:{span:12}},[t._v("联系邮箱: "+t._s(t.invoiceDetails.email))])],1)],1)]):t._e(),e("el-form-item",{staticStyle:{"margin-top":"14px"},attrs:{label:"开票状态："}},[e("el-radio-group",{on:{input:function(e){return t.kaiInvoice(t.formInline.is_invoice)}},model:{value:t.formInline.is_invoice,callback:function(e){t.$set(t.formInline,"is_invoice",e)},expression:"formInline.is_invoice"}},[e("el-radio",{attrs:{label:1}},[t._v("已开票")]),e("el-radio",{attrs:{label:0}},[t._v("未开票")])],1)],1),1===t.formInline.is_invoice?e("el-form-item",{attrs:{label:"发票编号："}},[e("el-input",{attrs:{placeholder:"请输入发票编号"},model:{value:t.formInline.invoice_number,callback:function(e){t.$set(t.formInline,"invoice_number",e)},expression:"formInline.invoice_number"}})],1):t._e(),1===t.formInline.is_invoice?e("el-form-item",{attrs:{label:"发票备注："}},[e("el-input",{attrs:{value:"备注",type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入发票备注"},model:{value:t.formInline.remark,callback:function(e){t.$set(t.formInline,"remark",e)},expression:"formInline.remark"}})],1):t._e(),e("div",{staticClass:"acea-row row-right"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("确定")])],1)],1)],1),e("el-dialog",{staticClass:"order_box",attrs:{visible:t.orderShow,title:"订单详情",width:"720px"},on:{"update:visible":function(e){t.orderShow=e}}},[t.orderShow?e("orderDetall",{attrs:{orderId:t.orderId},on:{detall:t.detall}}):t._e()],1)],1)}),[],!1,null,"3c2b00c5",null);e.default=r.exports},7614:function(t,e,i){"use strict";i("2198")}}]);