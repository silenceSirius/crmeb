(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/goods_bargain_details/index","components/zb-code/zb-code"],{"00a0ce":function(t,i,a){"use strict";a.r(i);var n=a("4653"),e=a("102f");for(var r in e)["default"].indexOf(r)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(r);a("85cd");var s=a("f0c5"),o=Object(s["a"])(e["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);i["default"]=o.exports},"0ae7":function(t,i,a){"use strict";(function(t,i){var n=a("4ea4");a("4789");n(a("66fd"));var e=n(a("00a0ce"));t.__webpack_require_UNI_MP_PLUGIN__=a,i(e.default)}).call(this,a("bc2e")["default"],a("543d")["createPage"])},"102f":function(t,i,a){"use strict";a.r(i);var n=a("f09e"),e=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(i,t,(function(){return n[t]}))}(r);i["default"]=e.a},"1ffc":function(t,i,a){"use strict";(function(t){var n=a("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e,r=n(a("7037")),s=n(a("984e")),o={name:"zb-code",props:{cid:{type:String,default:"zb-code-canvas"},size:{type:Number,default:200},unit:{type:String,default:"upx"},show:{type:Boolean,default:!0},val:{type:String,default:""},background:{type:String,default:"#ffffff"},foreground:{type:String,default:"#000000"},pdground:{type:String,default:"#000000"},icon:{type:String,default:""},iconSize:{type:Number,default:40},lv:{type:Number,default:3},onval:{type:Boolean,default:!1},loadMake:{type:Boolean,default:!1},usingComponents:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!1},loadingText:{type:String,default:"二维码生成中"}},data:function(){return{result:""}},methods:{_makeCode:function(){var i=this;this._empty(this.val)?t.showToast({title:"二维码内容不能为空",icon:"none",duration:2e3}):e=new s.default({context:i,canvasId:i.cid,usingComponents:i.usingComponents,showLoading:i.showLoading,loadingText:i.loadingText,text:i.val,size:i.cpSize,background:i.background,foreground:i.foreground,pdground:i.pdground,correctLevel:i.lv,image:i.icon,imageSize:i.iconSize,cbResult:function(t){i._result(t)}})},_clearCode:function(){this._result(""),e.clear()},_saveCode:function(){""!=this.result&&t.saveImageToPhotosAlbum({filePath:this.result,success:function(){t.showToast({title:"二维码保存成功",icon:"success",duration:2e3})}})},_result:function(t){this.result=t,this.$emit("result",t)},_empty:function(t){var i=(0,r.default)(t),a=!1;return"number"==i&&""==String(t)||"undefined"==i?a=!0:"object"==i?"{}"!=JSON.stringify(t)&&"[]"!=JSON.stringify(t)&&null!=t||(a=!0):"string"==i?""!=t&&"undefined"!=t&&"null"!=t&&"{}"!=t&&"[]"!=t||(a=!0):"function"==i&&(a=!1),a}},watch:{size:function(t,i){var a=this;t==i||this._empty(t)||(this.cSize=t,this._empty(this.val)||setTimeout((function(){a._makeCode()}),100))},val:function(t,i){var a=this;this.onval&&(t==i||this._empty(t)||setTimeout((function(){a._makeCode()}),0))}},computed:{cpSize:function(){return"upx"==this.unit?t.upx2px(this.size):this.size}},mounted:function(){var t=this;this.loadMake&&(this._empty(this.val)||setTimeout((function(){t._makeCode()}),0))}};i.default=o}).call(this,a("543d")["default"])},4653:function(t,i,a){"use strict";a.d(i,"b",(function(){return e})),a.d(i,"c",(function(){return r})),a.d(i,"a",(function(){return n}));var n={jyfParser:function(){return Promise.all([a.e("common/vendor"),a.e("components/jyf-parser/jyf-parser")]).then(a.bind(null,"47fd"))}},e=function(){var t=this,i=t.$createElement,a=(t._self._c,t.$t("人查看")),n=t.$t("人分享"),e=t.$t("人参与"),r=t.bargainUid==t.userInfo.uid?t.$t("倒计时"):null,s=t.bargainUid==t.userInfo.uid?t.$t("天"):null,o=t.bargainUid==t.userInfo.uid?t.$t("时"):null,u=t.bargainUid==t.userInfo.uid?t.$t("分"):null,c=t.bargainUid==t.userInfo.uid?t.$t("秒"):null,d=t.bargainUid!=t.userInfo.uid?t.$t("邀请您帮忙砍价"):null,g=t.$t("查看商品"),l=t.$t("当前"),f=t.$t("￥"),p=t.$t("最低"),b=t.$t("￥"),h=t.userBargainInfo.price>0?t.$t("已砍"):null,m=t.userBargainInfo.price>0?t.$t("还剩"):null,_=1==t.userBargainInfo.bargainType&&t.productStock>0&&t.quota>0?t.$t("立即参与砍价"):null,v=1==t.userBargainInfo.bargainType&&(t.productStock<=0||t.quota<=0)?t.$t("商品暂无库存"):null,y=2==t.userBargainInfo.bargainType?t.$t("邀请好友帮砍价"):null,$=2==t.userBargainInfo.bargainType?t.$t("已有"):null,I=2==t.userBargainInfo.bargainType?t.$t("位好友成功砍价"):null,U=3==t.userBargainInfo.bargainType?t.$t("帮好友砍一刀"):null,B=4==t.userBargainInfo.bargainType?t.$t("好友已砍价成功"):null,S=4==t.userBargainInfo.bargainType?t.$t("我也要参与"):null,k=5==t.userBargainInfo.bargainType?t.$t("已成功帮助好友砍价"):null,T=5==t.userBargainInfo.bargainType?t.$t("我也要参与"):null,w=6==t.userBargainInfo.bargainType?t.$t("恭喜您砍价成功，快去支付"):null,x=6==t.userBargainInfo.bargainType?t.$t("立即支付"):null,H=6==t.userBargainInfo.bargainType?t.$t("抢更多商品"):null,j=t.$t("砍价帮"),L=t.__map(t.bargainUserHelpList,(function(i,a){var n=t.__get_orig(i),e=a<3||!t.couponsHidden?t.$t("砍掉"):null,r=a<3||!t.couponsHidden?t.$t("￥"):null;return{$orig:n,m30:e,m31:r}})),P=t.bargainUserHelpList.length,C=P>3&&t.couponsHidden?t.$t("更多"):null,z=P>3&&!t.couponsHidden?t.$t("关闭"):null,D=t.limitStatus?null:t.$t("点击加载更多"),O=t.$t("商品详情"),N=t.$t("砍价规则"),A=t.bargainUid==t.userInfo.uid?t.$t("您已砍掉"):null,M=t.bargainUid==t.userInfo.uid?t.$t("元，听说分享次数越多砍价成功的机会越大哦"):null,q=t.bargainUid==t.userInfo.uid?t.$t("邀请好友帮砍价"):null,E=t.bargainUid!=t.userInfo.uid?t.$t("成功帮砍"):null,F=t.bargainUid!=t.userInfo.uid?t.$t("￥"):null,J=t.bargainUid!=t.userInfo.uid?t.$t("您也可以砍价低价拿哦，快去挑选心仪的商品吧"):null,R=t.bargainUid!=t.userInfo.uid?t.$t("我也要参与"):null,G=t.$t("发送给朋友"),K=t.$t("生成海报");t._isMounted||(t.e0=function(i){t.H5ShareBox=!1}),t.$mp.data=Object.assign({},{$root:{m0:a,m1:n,m2:e,m3:r,m4:s,m5:o,m6:u,m7:c,m8:d,m9:g,m10:l,m11:f,m12:p,m13:b,m14:h,m15:m,m16:_,m17:v,m18:y,m19:$,m20:I,m21:U,m22:B,m23:S,m24:k,m25:T,m26:w,m27:x,m28:H,m29:j,l0:L,g0:P,m32:C,m33:z,m34:D,m35:O,m36:N,m37:A,m38:M,m39:q,m40:E,m41:F,m42:J,m43:R,m44:G,m45:K}})},r=[]},"78ab":function(t,i,a){"use strict";a.r(i);var n=a("1ffc"),e=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(i,t,(function(){return n[t]}))}(r);i["default"]=e.a},"85cd":function(t,i,a){"use strict";var n=a("e94b"),e=a.n(n);e.a},"92ed":function(t,i,a){"use strict";a.r(i);var n=a("aef7"),e=a("78ab");for(var r in e)["default"].indexOf(r)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(r);a("f763");var s=a("f0c5"),o=Object(s["a"])(e["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);i["default"]=o.exports},aef7:function(t,i,a){"use strict";a.d(i,"b",(function(){return n})),a.d(i,"c",(function(){return e})),a.d(i,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},e=[]},e94b:function(t,i,a){},f09e:function(t,i,a){"use strict";(function(t){var n=a("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=n(a("7037")),r=(n(a("92ed")),a("84d8")),s=a("5743"),o=a("2a39"),u=n(a("9159")),c=a("86eb"),d=a("26cb"),g=a("00a0"),l=n(a("19b6")),f=getApp(),p={components:{countDown:function(){a.e("components/countDown/index").then(function(){return resolve(a("80f6"))}.bind(null,a)).catch(a.oe)},authorize:function(){a.e("components/Authorize").then(function(){return resolve(a("ad23"))}.bind(null,a)).catch(a.oe)},home:function(){Promise.all([a.e("common/vendor"),a.e("components/home/index")]).then(function(){return resolve(a("3b71"))}.bind(null,a)).catch(a.oe)},"jyf-parser":function(){Promise.all([a.e("common/vendor"),a.e("components/jyf-parser/jyf-parser")]).then(function(){return resolve(a("47fd"))}.bind(null,a)).catch(a.oe)}},mixins:[l.default],data:function(){return{imgHost:g.HTTP_REQUEST_URL,countDownDay:"00",countDownHour:"00",countDownMinute:"00",countDownSecond:"00",active:!1,id:0,userInfo:{},bargainUid:0,bargainUserInfo:{},bargainUserId:0,bargainInfo:[],userBargainInfo:[],offset:0,limit:20,limitStatus:!1,bargainUserHelpList:[],bargainUserHelpInfo:[],userBargainPrice:0,status:"",peopleCount:[],retunTop:!0,bargainPartake:0,isHelp:!1,interval:null,userBargainStatus:0,bargainSumCount:0,productStock:0,quota:0,userBargainStatusHelp:!0,navH:"",statusPay:"",bargainPrice:0,datatime:0,offest:"",tagStyle:{img:"width:100%;display:block;",table:"width:100%",video:"width:100%"},H5ShareBox:!1,systemH:100,isAuto:!1,isShowAuth:!1,pages:"",posters:!1,weixinStatus:!1,couponsHidden:!0,followCode:!1,codeShow:!1,cid:"1",ifShow:!0,val:"",size:200,unit:"upx",background:"#FFF",foreground:"#000",pdground:"#000",icon:"",iconsize:40,lv:3,onval:!0,loadMake:!0,src:"",codeSrc:"",picUrl:{},picList:[{popup:"../static/bulet.jpg",barga:"/statics/system_images/bargain_dt_bg_0.jpeg",support:"/statics/system_images/bargain_dt2_bg_0.jpeg",lock:"/statics/system_images/bargain_dt_lock_0.png",lace:"../static/buled.png"},{popup:"../static/greent.jpg",barga:"/statics/system_images/bargain_dt_bg_1.jpeg",support:"/statics/system_images/bargain_dt2_bg_1.jpeg",lock:"/statics/system_images/bargain_dt_lock_1.png",lace:"../static/greend.png"},{popup:"../static/redt.jpg",lace:"../static/redd.png",barga:"/statics/system_images/bargain_dt_bg_2.jpeg",support:"/statics/system_images/bargain_dt2_bg_2.jpeg",lock:"/statics/system_images/bargain_dt_lock_2.png"},{popup:"../static/pinkt.jpg",lace:"../static/pinkd.png",barga:"/statics/system_images/bargain_dt_bg_3.jpeg",support:"/statics/system_images/bargain_dt2_bg_3.jpeg",lock:"/statics/system_images/bargain_dt_lock_3.png"},{popup:"../static/oranget.jpg",lace:"../static/oranged.png",barga:"/statics/system_images/bargain_dt_bg_4.jpeg",support:"/statics/system_images/bargain_dt2_bg_4.jpeg",lock:"/statics/system_images/bargain_dt_lock_4.png"}]}},computed:(0,d.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(t,i){t&&(this.getBargainDetails(),this.addShareBargain())},deep:!0},colorStatus:function(t,i){t&&this.colorShow(t)}},onLoad:function(i){var a=this,n=this;this.colorStatus||(0,s.colorChange)("color_change").then((function(t){a.colorShow(t.data.status)})),t.getSystemInfo({success:function(t){n.systemH=t.statusBarHeight,n.navH=n.systemH+10}});var r=getCurrentPages();if(r.length<=1&&(n.retunTop=!1),i.scene){var o=u.default.getUrlParams(decodeURIComponent(i.scene));"object"===(0,e.default)(o)?(o.id&&(i.id=o.id),o.bargain&&(i.bargain=o.bargain),o.pid&&(f.globalData.spid=o.pid)):f.globalData.spid=o}i.spid&&(f.globalData.spid=i.spid),i.hasOwnProperty("id")&&(n.id=i.id,n.bargainUid=i.bargain||0),this.isLogin?("undefined"!=n.bargainUid&&n.bargainUid||(n.bargainUid=n.$store.state.app.uid),this.getBargainDetails(),this.addShareBargain()):(this.$Cache.set("login_back_url","/pages/activity/goods_bargain_details/index?id=".concat(i.id,"&bargain=").concat(this.bargainUid)),(0,c.toLogin)()),t.setNavigationBarTitle({title:this.$t("砍价详情")})},methods:{colorShow:function(t){switch(t){case 1:this.picUrl=this.picList[0];break;case 2:this.picUrl=this.picList[1];break;case 3:this.picUrl=this.picList[2];break;case 4:this.picUrl=this.picList[3];break;case 5:this.picUrl=this.picList[4];break;default:this.picUrl=this.picList[2];break}},listenerActionSheet:function(){0==this.isLogin?(0,c.toLogin)():this.posters=!0},getBargainUserBargainPricePoster:function(){t.navigateTo({url:"/pages/activity/poster-poster/index?type=1&id="+this.id+"&bargain="+this.bargainUid})},listenerActionClose:function(){this.posters=!1},goFriend:function(){this.posters=!1},openTap:function(){this.$set(this,"couponsHidden",!this.couponsHidden)},authColse:function(t){this.isShowAuth=t},goProduct:function(){t.navigateTo({url:"/pages/goods_details/index?id=".concat(this.bargainInfo.product_id)})},userBargain:function(){if(this.userInfo.uid==this.bargainUid){if(this.userBargainInfo.bargainOrderCount>=this.bargainInfo.num)return this.$util.Tips({title:this.$t("该商品每人限购")+"".concat(this.bargainInfo.num).concat(this.bargainInfo.unit_name)});this.setBargain()}},goBack:function(){t.navigateBack({delta:1})},gobargainUserInfo:function(){var t=this;t.bargainUid;(0,r.postBargainStartUser)({bargainId:t.id,bargainUserUid:t.bargainUid}).then((function(i){t.$set(t,"bargainUserInfo",i.data)}))},goPay:function(){var i=this,a={productId:i.bargainInfo.product_id,bargainId:i.id,cartNum:1,uniqueId:"",combinationId:0,secKillId:0,new:1};(0,o.postCartAdd)(a).then((function(i){t.navigateTo({url:"/pages/goods/order_confirm/index?new=1&cartId="+i.data.cartId})})).catch((function(t){return i.$util.Tips({title:t})}))},getBargainDetails:function(){var i=this,a=i.id;(0,r.getBargainDetail)(a,i.bargainUid).then((function(a){i.bargainInfo=a.data.bargain,i.userBargainInfo=a.data.userBargainInfo,i.bargainPrice=a.data.bargain.price,i.userInfo=a.data.userInfo,i.productStock=a.data.bargain.attr.product_stock,i.quota=a.data.bargain.attr.quota,i.datatime=a.data.bargain.stop_time,i.pages="/pages/activity/goods_bargain_details/index?id="+i.id+"&bargain="+i.bargainUid+"&scene="+i.userInfo.uid,t.setNavigationBarTitle({title:a.data.bargain.title.substring(0,13)+"..."}),i.bargainUserHelpList=[],i.getBargainUser(),i.bargainUid!=i.userInfo.uid&&i.gobargainUserInfo()})).catch((function(t){i.$util.Tips({title:t},{tab:2,url:"/pages/activity/goods_bargain/index"})}))},currentBargainUser:function(){this.$set(this,"bargainUid",this.userInfo.uid),this.setBargain()},setBargain:function(){var t=this;(0,r.postBargainStart)(t.id).then((function(i){t.$set(t,"userBargainPrice",i.data.price),t.$set(t,"active",!0),t.getBargainDetails(),t.userBargainStatus=1}),(function(i){t.$util.Tips({title:i})}))},setBargainHelp:function(){var t=this,i={bargainId:t.id,bargainUserUid:t.bargainUid};(0,r.postBargainHelp)(i).then((function(i){t.$set(t,"userBargainPrice",i.data.price),t.$set(t,"active",!0),t.getBargainDetails()})).catch((function(i){t.$util.Tips({title:i}),t.getBargainDetails()}))},getBargainUser:function(){var t=this,i={bargainId:t.id,bargainUserUid:t.bargainUid,offset:t.offset,limit:t.limit};(0,r.postBargainHelpList)(i).then((function(a){var n=t.bargainUserHelpList,e=a.data.length;n.concat(a.data),t.$set(t,"bargainUserHelpList",a.data),t.$set(t,"limitStatus",i.limit>e),t.$set(t,"offest",Number(i.offset)+Number(i.limit))}))},goBargainList:function(){t.navigateTo({url:"/pages/activity/goods_bargain/index"})},close:function(){this.$set(this,"active",!1)},addShareBargain:function(){var t=this,i=this;(0,r.postBargainShare)(this.id).then((function(a){i.$set(i,"peopleCount",a.data),t.pages="/pages/activity/goods_bargain_details/index?id="+t.id+"&bargain="+t.bargainUid+"&spid="+t.userInfo.uid}))}},onHide:function(){null!==this.interval&&clearInterval(this.interval)},onUnload:function(){null!==this.interval&&clearInterval(this.interval)},onShareAppMessage:function(){var t={title:this.$t("您的好友")+this.userInfo.nickname+this.$t("邀请您砍价")+this.bargainInfo.title+this.$t("go_help"),path:"/pages/activity/goods_bargain_details/index?id="+this.id+"&bargain="+this.bargainUid+"&spid="+this.userInfo.uid,imageUrl:this.bargainInfo.image};return this.close(),this.addShareBargain(),t}};i.default=p}).call(this,a("543d")["default"])},f763:function(t,i,a){"use strict";var n=a("f76f"),e=a.n(n);e.a},f76f:function(t,i,a){}},[["0ae7","common/runtime","common/vendor"]]]);